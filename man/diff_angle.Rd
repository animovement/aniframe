% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/transform_utils.R
\name{diff_angle}
\alias{diff_angle}
\title{First‑Order Angular Difference with NA Padding}
\usage{
diff_angle(x, lag = 1L)
}
\arguments{
\item{x}{A numeric vector of angles expressed in \strong{radians}.}

\item{lag}{Integer ≥ 1. Number of positions to shift when computing the
difference (identical to the \code{lag} argument of \code{base::diff}). Default is
\code{1L}.}
}
\value{
A numeric vector of length \code{length(x)}.  The first \code{lag} entries are
\code{NA}; the remaining entries contain the minimal signed angular distance
between successive angles, wrapped to the interval \(-π, π]\`.
}
\description{
A thin wrapper around base \code{diff()} that returns the smallest signed angular
distance (in radians) between successive elements of a numeric vector.  The
result is padded with \code{NA}s (equal to the chosen \code{lag}) so the output can be
used directly inside \code{dplyr::mutate()} without breaking row alignment.
}
\details{
\itemize{
\item \strong{Angular wrapping} – Each raw difference \code{to_angle - from_angle} is fed
to \code{calculate_angular_difference()}, which constrains the result to the
shortest rotation (‑π … π).  This prevents the artificial jump that occurs
at the ±π boundary.
\item \strong{NA padding} – Unlike \code{base::diff()}, which returns a vector of length
\code{length(x) - lag}, this implementation prepends \code{lag} \code{NA}s.  This makes the
function safe for use inside \code{dplyr::mutate()} where row‑wise alignment is
required.
}
}
\keyword{internal}
